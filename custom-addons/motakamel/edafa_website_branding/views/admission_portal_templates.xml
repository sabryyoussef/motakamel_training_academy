<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Admission Application Form Template -->
    <template id="admission_application_form" name="Admission Application Form">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure oe_empty">
                <section class="s_cover parallax s_parallax_is_fixed pt96 pb96" data-vcss="001" data-snippet="s_cover" data-scroll-background-ratio="1" data-name="Cover" style="background-image: url('/web/image/website.s_cover_default');">
                    <span class="s_parallax_bg oe_img_bg" style="background-image: url('/web/image/website.s_cover_default'); background-position: 50% 0;"></span>
                    <div class="o_we_bg_filter bg-black-50"></div>
                    <div class="container">
                        <h1 class="text-white">Student Admission Application</h1>
                        <p class="lead text-white">Join Edafa Education Platform - Apply Now!</p>
                    </div>
                </section>

                <section class="s_text_block pt32 pb32" data-snippet="s_text_block">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-8 offset-lg-2">
                                
                                <!-- Error Messages -->
                                <t t-if="error">
                                    <div class="alert alert-danger" role="alert">
                                        <h4 class="alert-heading">Please correct the following errors:</h4>
                                        <ul>
                                            <t t-foreach="error.items()" t-as="err">
                                                <li><strong><t t-esc="err[0].replace('_', ' ').title()"/>:</strong> <t t-esc="err[1]"/></li>
                                            </t>
                                        </ul>
                                    </div>
                                </t>

                                <!-- Admission Form -->
                                <form action="/admission/submit" method="POST" enctype="multipart/form-data" class="admission-form" id="admissionForm">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    
                                    <div class="alert alert-success mb-3">
                                        <i class="fa fa-info-circle"></i> 
                                        <strong>Test Mode:</strong> Form is pre-filled for easy testing - just click Submit! 
                                        <button type="button" class="btn btn-sm btn-warning ml-2" onclick="clearDemoData()">
                                            <i class="fa fa-eraser"></i> Clear Form
                                        </button>
                                    </div>
                                    
                                    <h3 class="mt-4 mb-3">Personal Information</h3>
                                    
                                    <div class="row">
                                        <div class="col-md-3 mb-3">
                                            <label for="title">Title</label>
                                            <select name="title" id="title" class="form-control">
                                                <option value="">Select...</option>
                                                <t t-foreach="titles" t-as="title">
                                                    <option t-att-value="title.id" t-att-selected="'selected' if default.get('title') == str(title.id) else None">
                                                        <t t-esc="title.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        
                                        <div class="col-md-3 mb-3">
                                            <label for="first_name">First Name</label>
                                            <input type="text" name="first_name" id="first_name" class="form-control" 
                                                   t-att-value="default.get('first_name')"/>
                                        </div>
                                        
                                        <div class="col-md-3 mb-3">
                                            <label for="middle_name">Middle Name</label>
                                            <input type="text" name="middle_name" id="middle_name" class="form-control"
                                                   t-att-value="default.get('middle_name')"/>
                                        </div>
                                        
                                        <div class="col-md-3 mb-3">
                                            <label for="last_name">Last Name</label>
                                            <input type="text" name="last_name" id="last_name" class="form-control"
                                                   t-att-value="default.get('last_name')"/>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="email">Email Address</label>
                                            <input type="email" name="email" id="email" class="form-control"
                                                   t-att-value="default.get('email')"/>
                                            <small class="form-text text-muted">We'll use this email to contact you about your application.</small>
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <label for="birth_date">Date of Birth</label>
                                            <input type="date" name="birth_date" id="birth_date" class="form-control"
                                                   t-att-value="default.get('birth_date')"/>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="gender">Gender</label>
                                            <select name="gender" id="gender" class="form-control">
                                                <option value="">Select Gender...</option>
                                                <option value="m" t-att-selected="'selected' if default.get('gender') == 'm' else None">Male</option>
                                                <option value="f" t-att-selected="'selected' if default.get('gender') == 'f' else None">Female</option>
                                                <option value="o" t-att-selected="'selected' if default.get('gender') == 'o' else None">Other</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="mobile">Mobile Number</label>
                                            <input type="tel" name="mobile" id="mobile" class="form-control"
                                                   t-att-value="default.get('mobile')"/>
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <label for="phone">Phone Number</label>
                                            <input type="tel" name="phone" id="phone" class="form-control"
                                                   t-att-value="default.get('phone')"/>
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label for="image">Upload Photo</label>
                                        <input type="file" name="image" id="image" class="form-control-file" accept="image/*"/>
                                        <small class="form-text text-muted">Optional: Upload a passport-sized photograph</small>
                                    </div>

                                    <h3 class="mt-4 mb-3">Address Information</h3>
                                    
                                    <div class="mb-3">
                                        <label for="street">Street Address</label>
                                        <input type="text" name="street" id="street" class="form-control"
                                               t-att-value="default.get('street')"/>
                                    </div>

                                    <div class="mb-3">
                                        <label for="street2">Street Address 2</label>
                                        <input type="text" name="street2" id="street2" class="form-control"
                                               t-att-value="default.get('street2')"/>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="city">City</label>
                                            <input type="text" name="city" id="city" class="form-control"
                                                   t-att-value="default.get('city')"/>
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <label for="zip">Zip/Postal Code</label>
                                            <input type="text" name="zip" id="zip" class="form-control"
                                                   t-att-value="default.get('zip')"/>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="country_id">Country</label>
                                            <select name="country_id" id="country_id" class="form-control">
                                                <option value="">Select Country...</option>
                                                <t t-foreach="countries" t-as="country">
                                                    <option t-att-value="country.id" t-att-selected="'selected' if default.get('country_id') == str(country.id) else None">
                                                        <t t-esc="country.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <label for="state_id">State/Province</label>
                                            <select name="state_id" id="state_id" class="form-control">
                                                <option value="">Select State...</option>
                                            </select>
                                        </div>
                                    </div>

                                    <h3 class="mt-4 mb-3">Academic Information</h3>
                                    
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="course_id">Course</label>
                                            <select name="course_id" id="course_id" class="form-control">
                                                <option value="">Select Course...</option>
                                                <t t-foreach="courses" t-as="course">
                                                    <option t-att-value="course.id" t-att-selected="'selected' if default.get('course_id') == str(course.id) else None">
                                                        <t t-esc="course.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        
                                        <div class="col-md-6 mb-3">
                                            <label for="batch_id">Preferred Batch</label>
                                            <select name="batch_id" id="batch_id" class="form-control">
                                                <option value="">Select Batch...</option>
                                                <t t-foreach="batches" t-as="batch">
                                                    <option t-att-value="batch.id" t-att-selected="'selected' if default.get('batch_id') == str(batch.id) else None">
                                                        <t t-esc="batch.name"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="mt-4">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="fa fa-paper-plane"></i> Submit Application
                                        </button>
                                        <a href="/" class="btn btn-secondary btn-lg ml-2">
                                            <i class="fa fa-times"></i> Cancel
                                        </a>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <!-- Application Status Check Template -->
    <template id="admission_status_check" name="Check Application Status">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">
                <section class="s_cover parallax s_parallax_is_fixed pt96 pb96" data-snippet="s_cover">
                    <span class="s_parallax_bg oe_img_bg" style="background-image: url('/web/image/website.s_cover_default'); background-position: 50% 0;"></span>
                    <div class="o_we_bg_filter bg-black-50"></div>
                    <div class="container">
                        <h1 class="text-white">Check Application Status</h1>
                    </div>
                </section>

                <section class="pt32 pb32">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-6 offset-lg-3">
                                
                                <t t-if="not admission and not error">
                                    <div class="card">
                                        <div class="card-body">
                                            <h3>Check Your Application Status</h3>
                                            <form action="/admission/check-status" method="GET">
                                                <div class="form-group">
                                                    <label for="application_number">Application Number</label>
                                                    <input type="text" name="application_number" id="application_number" 
                                                           class="form-control" required="required" 
                                                           placeholder="e.g., APP/2024/001"/>
                                                </div>
                                                <div class="form-group">
                                                    <label for="email">Email Address</label>
                                                    <input type="email" name="email" id="email" 
                                                           class="form-control" required="required" 
                                                           placeholder="your@email.com"/>
                                                </div>
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="fa fa-search"></i> Check Status
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </t>

                                <t t-if="error">
                                    <div class="alert alert-warning">
                                        <i class="fa fa-exclamation-triangle"></i> <t t-esc="error"/>
                                    </div>
                                    <a href="/admission/check-status" class="btn btn-primary">Try Again</a>
                                </t>

                                <t t-if="admission">
                                    <div class="card">
                                        <div class="card-header bg-primary text-white">
                                            <h4 class="mb-0">Application Details</h4>
                                        </div>
                                        <div class="card-body">
                                            <p><strong>Application Number:</strong> <t t-esc="admission.application_number"/></p>
                                            <p><strong>Name:</strong> <t t-esc="admission.name"/></p>
                                            <p><strong>Course:</strong> <t t-esc="admission.course_id.name"/></p>
                                            <p><strong>Application Date:</strong> <t t-esc="admission.application_date"/></p>
                                            <p><strong>Status:</strong> 
                                                <span t-att-class="'badge ' + ('badge-success' if admission.state == 'admission' else 'badge-warning' if admission.state == 'submit' else 'badge-info')">
                                                    <t t-esc="dict(admission._fields['state'].selection).get(admission.state)"/>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <a href="/admission/check-status" class="btn btn-secondary">Check Another Application</a>
                                    </div>
                                </t>

                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

</odoo>

